@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap');

:root {
	--map-legend-maxwidth: 50%;
	--map-legend-maxheight: 90vh;
	--map-legend-margin: 0.75rem;

	/* Pane */
	--map-legend-minwidth: 150px;
	--map-legend-background: #fff;
	--map-legend-radius: 4px;
	--map-legend-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
	--map-legend-border: 1px solid #eee;

	/* Title */
	--map-legend-title-color: #444;
	--map-legend-title-size: 0.7rem;

	/* Components */
	--map-legend-label-size: 0.65rem;
	--map-legend-label-color: #aaa;
	--map-legend-thumb-height: 0.7rem;
	--map-legend-thumb-radius: 2px;
	--map-legend-bubble-stroke: #ccc;
	--map-legend-bubble-background: #f8f8f8;
}

.mapboxgl-ctrl-legend {
	font: 12px / 1 'Open Sans', 'Arial Unicode MS Regular', sans-serif;
	min-width: var(--map-legend-minwidth);
	background: var(--map-legend-background);
	border-radius: var(--map-legend-radius);
	box-shadow: var(--map-legend-shadow);
	width: auto;
	position: relative;
	overflow: auto;
	max-width: var(--map-legend-maxwidth);
	max-height: var(--map-legend-maxheight);

	& * {
		margin: 0;
		padding: 0;
		list-style: none;
	}

	details + details { border-top: var(--map-legend-border); }

	summary {
		color: var(--map-legend-title-color);
		font-size: var(--map-legend-title-size);
		margin: var(--map-legend-margin);
		font-weight: bold;
		line-height: 1;
		text-transform: uppercase;
		outline: none;
	}

	.list {
		margin: var(--map-legend-margin);

		li {
			margin: calc(0.5 * var(--map-legend-margin)) 0;
			display: flex;
			align-items: center;
			font-size: var(--map-legend-label-size);
			color: var(--map-legend-label-color);
			text-transform: uppercase;
		}

		&--color li::before {
			content: '';
			display: block;
			height: var(--map-legend-thumb-height);
			width: var(--map-legend-thumb-height);
			background: var(--color);
			margin-right: calc(0.5 * var(--map-legend-margin));
			border-radius: var(--map-legend-thumb-radius);
		}
	}

	.gradient {
		margin: var(--map-legend-margin);

		.labels {
			position: relative;
			height: calc(1.5 * var(--map-legend-label-size));
			font-size: var(--map-legend-label-size);

			span {
				position: absolute;
				color: var(--map-legend-label-color);
				transform: translateX(-50%);

				&:first-child { transform: none; }
				&:last-child { transform: translateX(-100%); }
			}
		}

		.bar {
			height: var(--map-legend-thumb-height);
			background: #ccc;
			border-radius: var(--map-legend-thumb-radius);
		}
	}

	.bubbles {
		position: relative;
		font-size: var(--map-legend-label-size);
		color: var(--map-legend-label-color);
		margin:
			var(--map-legend-margin)
			calc(1.5 * var(--map-legend-margin));

		li {
			left: 50%;
			text-align: center;

			& + li {
				position: absolute;
				bottom: 0;
				left: 0;
				width: 100%;
			}

			span {
				position: absolute;
				bottom: 100%;
				left: 0;
				width: 50%;
				margin-bottom: -1px;
				border-bottom: 1px solid var(--map-legend-bubble-stroke);
				padding-bottom: 2px;
				text-align: left;
			}

			&:nth-child(2n + 1) span {
				left: 50%;
				text-align: right;
			}

			&::before {
				display: inline-block;
				content: '';
				height: var(--radius);
				width: var(--radius);
				border: 1px solid var(--map-legend-bubble-stroke);
				background: var(--map-legend-bubble-background);
				border-radius: 50%;
			}
		}
	}
}
